<div class="contact-container">
    <h1 class="title-this-month contact"><span class="feature-word">Contact</span>&nbsp;Us</h1>
    <div class="sub-contact-container row">
        <div class="left-sub-contact-container col-sm">
            <form id="contactForm" onsubmit="sendWhatsAppMessage(event)">
                <div class="form-group">
                    <span class="top-contact-input">
                        <div class="input-control">
                            <input id="iusername" type="text" class="form-control" placeholder="Name">
                            <div class="error"></div>
                        </div>
                        <div class="input-control">
                            <input id="iemail" type="email" class="form-control" placeholder="Email">
                            <div class="error"></div>
                        </div>
                    </span>
                    <div class="input-control">
                        <input id="isubject" type="text" class="form-control" placeholder="Subject">
                        <div class="error"></div>
                    </div>
                    <div class="input-control">
                        <textarea id="imessage" class="form-control" placeholder="Type Your Message" rows="3"></textarea>
                        <div class="error"></div>
                    </div>
                    <button type="submit" class="btn btn-secondary">Send Message</button>
                </div>
            </form>
        </div>
        <div class="right-sub-contact-container col-sm">
            <p class="text-contact-p" style=" text-align: justify; color: rgb(86, 85, 85);">
                Dynamically underwhelm integrated outsourcing
                via timely models. Rapidiously reconceptualize visionary imperatives without
            </p>
            <p class="text-contact-p" style=" text-align: justify;color: rgb(86, 85, 85);">
                blog.notebook@gmail.com <br>
                +886554 654654 <br>
                9567 Turner Trace Apt. BC C3G8A4
            </p>
            <div class="title-footer follow" style="margin-top: 1vw !important;margin-bottom: 1vw !important;"><a href="">Follow On:</a></div>
            <div class="author-social-media-icons-section">
                <span  onclick="window.open('https://www.facebook.com', '_blank')" class="author-social-media-icon"><i class="fa-brands fa-facebook"></i></span>
                <span  onclick="window.open('https://www.twitter.com', '_blank')" class="author-social-media-icon"><i class="fa-brands fa-twitter"></i></span>
                <span   onclick="window.open('https://www.instagram.com', '_blank')" class="author-social-media-icon"><i class="fa-brands fa-instagram"></i></span>
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function() {
    const form = $('#contactForm');
    const username = $('#iusername');
    const email = $('#iemail');
    const subject = $('#isubject');
    const message = $('#imessage');

    form.on('submit', function(e) {
        e.preventDefault();
        validateInputs();
        sendWhatsAppMessage();
    });

    const setError = (element, message) => {
        const inputControl = element.parent();
        const errorDisplay = inputControl.find('.error');

        errorDisplay.text(message);
        inputControl.addClass('error').removeClass('success');
        element.css('border', '1px solid red');
    };

    const setSuccess = element => {
        const inputControl = element.parent();
        const errorDisplay = inputControl.find('.error');

        errorDisplay.text('');
        inputControl.addClass('success').removeClass('error');
        element.css('border', '');
    };

    const isValidEmail = email => {
        const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(String(email).toLowerCase());
    };

    const validateInputs = () => {
        const usernameValue = username.val().trim();
        const emailValue = email.val().trim();
        const subjectValue = subject.val().trim();
        const messageValue = message.val().trim();

        if(usernameValue === '') {
            setError(username, 'Username is required');
            return false;
        } else {
            setSuccess(username);
        }

        if(emailValue === '') {
            setError(email, 'Email is required');
            return false;
        } else if (!isValidEmail(emailValue)) {
            setError(email, 'Provide a valid email address');
            return false;
        } else {
            setSuccess(email);
        }

        if(subjectValue === '') {
            setError(subject, 'Subject is required');
            return false;
        } else {
            setSuccess(subject);
        }

        if(messageValue === '') {
            setError(message, 'Message is required');
            return false;
        } else {
            setSuccess(message);
        }

        return true;
    };

    function sendWhatsAppMessage(event) {
        if (!validateInputs()) return;

        const usernameValue = username.val().trim();
        const emailValue = email.val().trim();
        const subjectValue = subject.val().trim();
        const messageValue = message.val().trim();

        const whatsappMessage = `Name: ${usernameValue}%0AEmail: ${emailValue}%0ASubject: ${subjectValue}%0AMessage: ${messageValue}`;
        const whatsappUrl = `https://wa.me/93401400510?text=${whatsappMessage}`;

        window.open(whatsappUrl, '_blank');
    }
});
</script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
